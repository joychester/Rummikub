function BOOMR_check_doc_domain(e){var t;if(!e){if(window.parent===window||!document.getElementById("boomr-if-as"))return;if(window.BOOMR&&BOOMR.boomerang_frame&&BOOMR.window)try{BOOMR.boomerang_frame.document.domain!==BOOMR.window.document.domain&&(BOOMR.boomerang_frame.document.domain=BOOMR.window.document.domain)}catch(r){BOOMR.isCrossOriginError(r)||BOOMR.addError(r,"BOOMR_check_doc_domain.domainFix")}e=document.domain}if(-1!==e.indexOf(".")){try{return void(t=window.parent.document)}catch(r){document.domain=e}try{return void(t=window.parent.document)}catch(r){e=e.replace(/^[\w\-]+\./,"")}BOOMR_check_doc_domain(e)}}BOOMR_start=Date.now(),BOOMR_check_doc_domain(),function(e){var t,r,n,i,o,a,s,d,u=e;e.parent!==e&&document.getElementById("boomr-if-as")&&"script"===document.getElementById("boomr-if-as").nodeName.toLowerCase()&&(e=e.parent,i=document.getElementById("boomr-if-as").src),n=e.document,e.BOOMR||(e.BOOMR={}),BOOMR=e.BOOMR,BOOMR.version||(BOOMR.version="0.9",BOOMR.window=e,BOOMR.boomerang_frame=u,BOOMR.plugins||(BOOMR.plugins={}),function(){try{void 0!==new e.CustomEvent("CustomEvent")&&(o=function(t,r){return new e.CustomEvent(t,r)})}catch(t){}try{!o&&n.createEvent&&n.createEvent("CustomEvent")&&(o=function(e,t){var r=n.createEvent("CustomEvent");return t=t||{cancelable:!1,bubbles:!1},r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r})}catch(t){}!o&&n.createEventObject&&(o=function(e,t){var r=n.createEventObject();return r.type=r.propertyName=e,r.detail=t.detail,r}),o||(o=function(){})}(),a=function(e,t,r){function i(){n.dispatchEvent?n.dispatchEvent(a):n.fireEvent&&n.fireEvent("onpropertychange",a)}var a=o(e,{detail:t});a&&(r?BOOMR.setImmediate(i):i())},"undefined"!=typeof document.hidden?(s="visibilityState",d="visibilitychange"):"undefined"!=typeof document.mozHidden?(s="mozVisibilityState",d="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(s="msVisibilityState",d="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(s="webkitVisibilityState",d="webkitvisibilitychange"),t={beacon_url:"",beacon_type:"AUTO",site_domain:e.location.hostname.replace(/.*?([^.]+\.[^.]+)\.?$/,"$1").toLowerCase(),user_ip:"",autorun:!0,strip_query_string:!1,onloadfired:!1,handlers_attached:!1,timeout:15e3,beacon_delay:0,beacon_switch:"on",url_pattern:"ALL",blacklist:[],sample_ratio:1,events:{page_ready:[],page_unload:[],before_unload:[],dom_loaded:[],visibility_changed:[],before_beacon:[],onbeacon:[],xhr_load:[],click:[],form_submit:[]},public_events:{before_beacon:"onBeforeBoomerangBeacon",onbeacon:"onBoomerangBeacon",onboomerangloaded:"onBoomerangLoaded"},vars:{},errors:{},disabled_plugins:{},xb_handler:function(r){return function(n){var i;n||(n=e.event),n.target?i=n.target:n.srcElement&&(i=n.srcElement),3===i.nodeType&&(i=i.parentNode),i&&"OBJECT"===i.nodeName.toUpperCase()&&"application/x-shockwave-flash"===i.type||t.fireEvent(r,i)}},fireEvent:function(e,t){BOOMR.info("fireEvent_#313_"+e);var r,n,i;if(e=e.toLowerCase(),this.events.hasOwnProperty(e))for(this.public_events.hasOwnProperty(e)&&a(this.public_events[e],t),i=this.events[e],r=0;r<i.length;r++)try{n=i[r],n.fn.call(n.scope,t,n.cb_data)}catch(o){BOOMR.addError(o,"fireEvent."+e+"<"+r+">")}}},r={t_lstart:null,t_start:BOOMR_start,t_end:null,t_onload:void 0,url:i,utils:{objectToString:function(e,t,r){var n,i=[];if(!e||"object"!=typeof e)return e;if(void 0===t&&(t="\n	"),r||(r=0),"[object Array]"===Object.prototype.toString.call(e)){for(n=0;n<e.length;n++)r>0&&null!==e[n]&&"object"==typeof e[n]?i.push(this.objectToString(e[n],t+("\n	"===t?"	":""),r-1)):"&"===t?i.push(encodeURIComponent(e[n])):i.push(e[n]);t=","}else for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r>0&&null!==e[n]&&"object"==typeof e[n]?i.push(encodeURIComponent(n)+"="+this.objectToString(e[n],t+("\n	"===t?"	":""),r-1)):"&"===t?i.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n])):i.push(n+"="+e[n]));return i.join(t)},getCookie:function(e){if(!e)return null;e=" "+e+"=";var t,r;return r=" "+n.cookie+";",(t=r.indexOf(e))>=0?(t+=e.length,r=r.substring(t,r.indexOf(";",t)).replace(/^"/,"").replace(/"$/,"")):null},setCookie:function(e,r,i){var o,a,s,d,u;if(!e||!t.site_domain)return!1;if(o=this.objectToString(r,"&"),a=e+'="'+o+'"',d=[a,"path=/","domain="+t.site_domain],i&&(u=new Date,u.setTime(u.getTime()+1e3*i),u=u.toGMTString(),d.push("expires="+u)),a.length<500){if(n.cookie=d.join("; "),s=this.getCookie(e),o===s)return!0;BOOMR.warn("Saved cookie value doesn't match what we tried to set:\n"+o+"\n"+s)}else BOOMR.warn("Cookie too long: "+a.length+" "+a);return!1},getSubCookies:function(e){var t,r,n,i,o=!1,a={};if(!e)return null;if("string"!=typeof e)return null;for(t=e.split("&"),r=0,n=t.length;n>r;r++)i=t[r].split("="),i[0]&&(i.push(""),a[decodeURIComponent(i[0])]=decodeURIComponent(i[1]),o=!0);return o?a:null},removeCookie:function(e){return this.setCookie(e,{},-86400)},cleanupURL:function(e){return e&&"[object Array]"!==Object.prototype.toString.call(e)?t.strip_query_string?e.replace(/\?.*/,"?qs-redacted"):e:""},hashQueryString:function(e,t){return e?e.match?(e.match(/^\/\//)&&(e=location.protocol+e),e.match(/^(https?|file):/)?(t&&(e=e.replace(/#.*/,"")),BOOMR.utils.MD5?e.replace(/\?([^#]*)/,function(e,t){return"?"+(t.length>10?BOOMR.utils.MD5(t):t)}):e):(BOOMR.error("Passed in URL is invalid: "+e),"")):(BOOMR.addError("TypeError: Not a string","hashQueryString",typeof e),""):e},pluginConfig:function(e,t,r,n){var i,o=0;if(!t||!t[r])return!1;for(i=0;i<n.length;i++)void 0!==t[r][n[i]]&&(e[n[i]]=t[r][n[i]],o++);return o>0},arrayFilter:function(e,t){var r=[];if("function"==typeof e.filter)r=e.filter(t);else for(var n,i=-1,o=e.length;++i<o;)n=e[i],t(n,i,e)&&(r[r.length]=n);return r},encodeString:function(e){var t={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var r,n,i,o,a,s,d,u="",c=0;for(e=t._utf8_encode(e);c<e.length;)r=e.charCodeAt(c++),n=e.charCodeAt(c++),i=e.charCodeAt(c++),o=r>>2,a=(3&r)<<4|n>>4,s=(15&n)<<2|i>>6,d=63&i,isNaN(n)?s=d=64:isNaN(i)&&(d=64),u=u+this._keyStr.charAt(o)+this._keyStr.charAt(a)+this._keyStr.charAt(s)+this._keyStr.charAt(d);return u},decode:function(e){var r,n,i,o,a,s,d,u="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)o=this._keyStr.indexOf(e.charAt(c++)),a=this._keyStr.indexOf(e.charAt(c++)),s=this._keyStr.indexOf(e.charAt(c++)),d=this._keyStr.indexOf(e.charAt(c++)),r=o<<2|a>>4,n=(15&a)<<4|s>>2,i=(3&s)<<6|d,u+=String.fromCharCode(r),64!=s&&(u+=String.fromCharCode(n)),64!=d&&(u+=String.fromCharCode(i));return u=t._utf8_decode(u)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);128>n?t+=String.fromCharCode(n):n>127&&2048>n?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},_utf8_decode:function(e){for(var t="",r=0,n=c1=c2=0;r<e.length;)n=e.charCodeAt(r),128>n?(t+=String.fromCharCode(n),r++):n>191&&224>n?(c2=e.charCodeAt(r+1),t+=String.fromCharCode((31&n)<<6|63&c2),r+=2):(c2=e.charCodeAt(r+1),c3=e.charCodeAt(r+2),t+=String.fromCharCode((15&n)<<12|(63&c2)<<6|63&c3),r+=3);return t}};return t.encode(e)},addObserver:function(e,t,r,n,i,o){function a(e){var t=!1;s.timer&&(clearTimeout(s.timer),s.timer=null),n&&(t=n.call(o,e,i),t||(n=null)),!t&&s.observer&&(s.observer.disconnect(),s.observer=null),"number"==typeof t&&t>0&&(s.timer=setTimeout(a,t))}var s={observer:null,timer:null};return window.MutationObserver&&n&&e?(s.observer=new MutationObserver(a),r&&(s.timer=setTimeout(a,s.timeout)),s.observer.observe(e,t),s):null},addListener:function(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent&&e.attachEvent("on"+t,r)},removeListener:function(e,t,r){e.removeEventListener?e.removeEventListener(t,r,!1):e.detachEvent&&e.detachEvent("on"+t,r)},pushVars:function(e,t,r){var n,i,o,a=0;for(n in t)if(t.hasOwnProperty(n))if("[object Array]"===Object.prototype.toString.call(t[n]))for(i=0;i<t[n].length;++i)a+=BOOMR.utils.pushVars(e,t[n][i],n+"["+i+"]");else o=document.createElement("input"),o.type="hidden",o.name=r?r+"["+n+"]":n,o.value=void 0===t[n]||null===t[n]?"":t[n],e.appendChild(o),a+=encodeURIComponent(o.name).length+encodeURIComponent(o.value).length+2;return a},sendData:function(e,r){function n(e){var t=document.getElementById(e);t&&t.parentNode.removeChild(t)}function i(){var t,r="boomerang_post-"+encodeURIComponent(e.action)+"-"+Math.random();try{t=document.createElement('<iframe name="'+r+'">')}catch(a){t=document.createElement("iframe")}e.action=o.shift(),t.name=t.id=r,t.style.display=e.style.display="none",t.src="javascript:false",n(t.id),n(e.id),document.body.appendChild(t);var s=t.contentWindow||t.contentDocument;s.document&&(s=s.document),s.body?s.body.appendChild(e):s.appendChild(e);try{e.submit()}catch(a){}o.length&&BOOMR.setImmediate(i),setTimeout(function(){n(t.id)},1e4)}BOOMR.info("sendData_#720");var o=(document.createElement("input"),[t.beacon_url]);e.method=r,e.id="beacon_form",e.enctype="application/x-www-form-urlencoded",t.secondary_beacons&&t.secondary_beacons.length&&o.push.apply(o,t.secondary_beacons),i()}},init:function(r){BOOMR.info("init_#809");var i,o,a=["beacon_url","beacon_type","site_domain","user_ip","strip_query_string","secondary_beacons","autorun","timeout","beacon_switch","blacklist","url_pattern","beacon_delay","sample_ratio"];for(BOOMR_check_doc_domain(),r||(r={}),i=0;i<a.length;i++)void 0!==r[a[i]]&&(t[a[i]]=r[a[i]]);if(!("on"===t.beacon_switch.toLowerCase()&&Math.random()<t.sample_ratio))return void BOOMR.info("RUM feature not enabled!");if(!("performance"in window&&"timing"in window.performance&&performance.now))return void BOOMR.info("Browser compatibility check failed!");var s=!1,d=BOOMR.utils.cleanupURL(n.URL.replace(/#.*/,""));if(Array.isArray(t.url_pattern))for(var i in t.url_pattern){var u=t.url_pattern[i];if(""!==u){var c=new RegExp(u,"gi");if(d.match(c)){s=!0;break}}}else"ALL"===t.url_pattern.toUpperCase()&&(BOOMR.info("url_pattern has been set to match all url"),s=!0);if(!s)return void BOOMR.info(d+" This URL isn't match, check your url_pattern!");BOOMR.info(d+" This URL is matched!");var l=t.timeout;if(1e4>l&&BOOMR.warn("beacon send timeout value is a little bit short...consider to increase it (15 seconds by default)! "),t.timeoutID=setTimeout(function(){BOOMR.addVar("user_timing",window.performance.now().toFixed(1)),BOOMR.addVar("timeout","true"),BOOMR.page_ready()},l),BOOMR.info("Timeout ID Set: "+t.timeoutID),r.primary&&t.handlers_attached)return this;void 0!==r.site_domain&&(this.session.domain=r.site_domain),void 0!==r.log&&(this.log=r.log),this.log||(this.log=function(){});for(o in this.plugins)if(this.plugins.hasOwnProperty(o)){if(r[o]&&r[o].hasOwnProperty("enabled")&&r[o].enabled===!1){t.disabled_plugins[o]=1;continue}if(t.disabled_plugins[o]){if(!r[o]||!r[o].hasOwnProperty("enabled")||r[o].enabled!==!0)continue;delete t.disabled_plugins[o]}if("function"==typeof this.plugins[o].init)try{this.plugins[o].init(r)}catch(O){BOOMR.addError(O,o+".init")}}return t.handlers_attached?this:(t.onloadfired||void 0!==r.autorun&&r.autorun===!1||(n.readyState&&"complete"===n.readyState?(BOOMR.loadedLate=!0,this.setImmediate(BOOMR.page_ready_autorun,null,null,BOOMR)):e.onpagehide||null===e.onpagehide?BOOMR.utils.addListener(e,"pageshow",BOOMR.page_ready_autorun):BOOMR.utils.addListener(e,"load",BOOMR.page_ready_autorun)),BOOMR.utils.addListener(e,"DOMContentLoaded",function(){t.fireEvent("dom_loaded")}),t.handlers_attached=!0,this)},page_ready_autorun:function(e){t.autorun&&BOOMR.page_ready(e)},page_ready:function(r){return r||(r=e.event),r||(r={name:"load"}),t.onloadfired?this:(t.fireEvent("page_ready",r),t.onloadfired=!0,BOOMR.disableTimeOut(),this)},disableTimeOut:function(){"undefined"!=typeof t.timeoutID&&(clearTimeout(t.timeoutID),BOOMR.info("Timeout ID Cleared: "+t.timeoutID))},setImmediate:function(t,r,n,i){var o,a;"undefined"!=typeof Error&&(a=new Error,a=a.stack?a.stack.replace(/^Error/,"Called"):void 0),o=function(){t.call(i||null,r,n||{},a),o=null},e.setImmediate?e.setImmediate(o):e.msSetImmediate?e.msSetImmediate(o):e.webkitSetImmediate?e.webkitSetImmediate(o):e.mozSetImmediate?e.mozSetImmediate(o):setTimeout(o,10)},now:function(){try{if("performance"in window&&window.performance&&window.performance.now)return function(){return Math.round(window.performance.now()+window.performance.timing.navigationStart)}}catch(e){}return Date.now||function(){return(new Date).getTime()}}(),visibilityState:void 0===s?function(){return"visible"}:function(){return n[s]},lastVisibilityEvent:{},subscribe:function(r,n,i,o){var a,s,d;if(r=r.toLowerCase(),!t.events.hasOwnProperty(r))return this;for(d=t.events[r],a=0;a<d.length;a++)if(s=d[a],s&&s.fn===n&&s.cb_data===i&&s.scope===o)return this;return d.push({fn:n,cb_data:i||{},scope:o||null}),"page_ready"===r&&t.onloadfired&&this.setImmediate(n,null,i,o),("page_unload"===r||"before_unload"===r)&&!function(){var a,s=d.length;a=function(a){n&&n.call(o,a||e.event,i),"page_unload"===r&&s===t.events[r].length&&BOOMR.real_sendBeacon()},"page_unload"===r&&(e.onpagehide||null===e.onpagehide?BOOMR.utils.addListener(e,"pagehide",a):BOOMR.utils.addListener(e,"unload",a)),BOOMR.utils.addListener(e,"beforeunload",a)}(),this},addError:function(e,r,n){var i;"string"!=typeof e&&(i=String(e),i.match(/^\[object/)&&(i=e.name+": "+(e.description||e.message).replace(/\r\n$/,"")),e=i),void 0!==r&&(e="["+r+":"+BOOMR.now()+"] "+e),n&&(e+=":: "+n),t.errors[e]?t.errors[e]++:t.errors[e]=1},isCrossOriginError:function(e){return"SecurityError"===e.name||"TypeError"===e.name&&"Permission denied"===e.message||"Error"===e.name&&e.message&&e.message.match(/^(Permission|Access is) denied/)},addVar:function(e,r){if("string"==typeof e)t.vars[e]=r;else if("object"==typeof e){var n,i=e;for(n in i)i.hasOwnProperty(n)&&(t.vars[n]=i[n])}return this},addUTVar:function(e,r){return performance.getEntriesByName&&"string"==typeof e&&"string"==typeof r&&(value=window.performance.getEntriesByName(r)[0].startTime.toFixed(1),t.vars[e]=value),this},removeVar:function(e){var r,n;if(!arguments.length)return this;for(n=1===arguments.length&&"[object Array]"===Object.prototype.toString.apply(e)?e:arguments,r=0;r<n.length;r++)t.vars.hasOwnProperty(n[r])&&delete t.vars[n[r]];return this},clearVars:function(){t.vars={}},hasVar:function(e){return t.vars.hasOwnProperty(e)},requestStart:function(e){var t=BOOMR.now();return BOOMR.plugins.RT.startTimer("xhr_"+e,t),{loaded:function(r){BOOMR.responseEnd(e,t,r)}}},responseEnd:function(e,r,n){"object"==typeof e&&e.url?t.fireEvent("xhr_load",e):(BOOMR.plugins.RT.startTimer("xhr_"+e,r),t.fireEvent("xhr_load",{name:"xhr_"+e,data:n}))},uninstrumentXHR:function(){},instrumentXHR:function(){},sendBeacon:function(e){return BOOMR.info("sendBeacon_#1263"),e&&(t.beacon_url=e),t.beaconQueued||(t.beaconQueued=!0,BOOMR.setImmediate(BOOMR.real_sendBeacon,null,null,BOOMR)),!0},real_sendBeacon:function(){BOOMR.info("real_sendBeacon_#1279");var r,i,o=0,a=[];if(!t.beaconQueued)return!1;t.beaconQueued=!1;for(r in this.plugins)if(this.plugins.hasOwnProperty(r)){if(t.disabled_plugins[r])continue;if(!this.plugins[r].is_complete())return!1}var s="spa"===t.vars["http.initiator"],d=s?n.URL:n.URL.replace(/#.*/,"");t.vars.pgu=BOOMR.utils.cleanupURL(d),(!t.vars.u||s)&&(t.vars.u=t.vars.pgu),t.vars.pgu===t.vars.u&&delete t.vars.pgu,t.vars.v=BOOMR.version,BOOMR.visibilityState()&&(t.vars["vis.st"]=BOOMR.visibilityState(),BOOMR.lastVisibilityEvent.visible&&(t.vars["vis.lv"]=BOOMR.now()-BOOMR.lastVisibilityEvent.visible),BOOMR.lastVisibilityEvent.hidden&&(t.vars["vis.lh"]=BOOMR.now()-BOOMR.lastVisibilityEvent.hidden)),e!==window&&(t.vars["if"]="");for(r in t.errors)t.errors.hasOwnProperty(r)&&a.push(r+(t.errors[r]>1?" (*"+t.errors[r]+")":""));a.length>0&&(t.vars.errors=a.join("\n")),t.errors={},t.fireEvent("before_beacon",t.vars);var u=BOOMR.utils.encodeString(window.performance.timing.navigationStart+"_"+t.vars.user_timing+"_"+Date.now());if(BOOMR.addVar("_",u),!t.beacon_url)return!0;for(name in t.vars)-1!==t.blacklist.indexOf(name)&&delete t.vars[name];if(i=document.createElement("form"),o=BOOMR.utils.pushVars(i,t.vars),0===o)return this;var c=t.beacon_delay;return c>0&&"true"!==t.vars.timeout?(t.beaconDelayID=setTimeout(function(){BOOMR.utils.sendData(i,"AUTO"===t.beacon_type?o>2e3?"POST":"GET":"POST"),BOOMR.info("Beacon sent on :"+Date.now())},c),BOOMR.info("Beacon delay timeoutID Set:"+t.beaconDelayID)):(BOOMR.utils.sendData(i,"AUTO"===t.beacon_type?o>2e3?"POST":"GET":"POST"),BOOMR.info("Beacon sent on :"+Date.now())),BOOMR.clearVars(),!0}},delete BOOMR_start,"number"==typeof BOOMR_lstart?(r.t_lstart=BOOMR_lstart,delete BOOMR_lstart):"number"==typeof BOOMR.window.BOOMR_lstart&&(r.t_lstart=BOOMR.window.BOOMR_lstart),"number"==typeof BOOMR.window.BOOMR_onload&&(r.t_onload=BOOMR.window.BOOMR_onload),function(){var e;"object"==typeof console&&void 0!==console.log&&(r.log=function(e,t,r){console.log(r+": ["+t+"] "+e)}),e=function(e){return function(t,r){return this.log(t,e,"boomerang"+(r?"."+r:"")),this}},r.debug=e("debug"),r.info=e("info"),r.warn=e("warn"),r.error=e("error")}(),function(){var e;for(e in r)r.hasOwnProperty(e)&&(BOOMR[e]=r[e]);BOOMR.xhr_excludes||(BOOMR.xhr_excludes={})}(),a("onBoomerangLoaded",{BOOMR:BOOMR},!0))}(window),function(e){var t,r=e.document;BOOMR=BOOMR||{},BOOMR.plugins=BOOMR.plugins||{},BOOMR.plugins.RT||(t={onloadfired:!1,unloadfired:!1,visiblefired:!1,initialized:!1,complete:!1,timers:{},cookie:"RT",cookie_exp:600,strict_referrer:!0,navigationType:0,navigationStart:void 0,responseStart:void 0,t_start:void 0,cached_t_start:void 0,t_fb_approx:void 0,r:void 0,r2:void 0,basic_timers:{t_done:1,t_resp:1,t_page:1},addedVars:[],updateCookie:function(e,t){var r,n,i,o;if(!this.cookie)return!1;if(i=BOOMR.utils.getSubCookies(BOOMR.utils.getCookie(this.cookie))||{},"object"==typeof e)for(o in e)e.hasOwnProperty(o)&&(void 0===e[o]?i.hasOwnProperty(o)&&delete i[o]:(("nu"===o||"r"===o)&&(e[o]=BOOMR.utils.hashQueryString(e[o],!0)),i[o]=e[o]));return n=BOOMR.now(),t&&(i[t]=n),BOOMR.utils.setCookie(this.cookie,i,this.cookie_exp)?(r=BOOMR.now(),r-n>50&&(BOOMR.utils.removeCookie(this.cookie),BOOMR.error("took more than 50ms to set cookie... aborting: "+n+" -> "+r,"rt")),!0):(BOOMR.error("cannot set start cookie","rt"),!1)},initFromCookie:function(){var e,t;t=BOOMR.utils.getSubCookies(BOOMR.utils.getCookie(this.cookie)),t&&(t.s=Math.max(+t.ld||0,Math.max(+t.ul||0,+t.cl||0)),t.s&&(t.r||t.nu)&&(this.r=t.r,e=BOOMR.utils.hashQueryString(r.URL,!0),!this.strict_referrer||t.nu&&t.nu===e&&t.s<+t.cl+15||t.s===+t.ul&&this.r===this.r2?(this.t_start=t.s,+t.hd>t.s&&(this.t_fb_approx=parseInt(t.hd,10))):this.t_start=this.t_fb_approx=void 0),this.updateCookie({s:void 0,r:void 0,nu:void 0,ul:void 0,cl:void 0,hd:void 0}))},getBoomerangTimings:function(){function e(e,t){var r=Math.round(e?e:0),n=Math.round(t?t:0);return r=0===r?0:r-n,r?r:""}var r,n,i,o,a;BOOMR.t_start&&(BOOMR.plugins.RT.startTimer("boomerang",BOOMR.t_start),BOOMR.plugins.RT.endTimer("boomerang",BOOMR.t_end),BOOMR.plugins.RT.endTimer("boomr_fb",BOOMR.t_start),BOOMR.t_lstart&&(BOOMR.plugins.RT.endTimer("boomr_ld",BOOMR.t_lstart),BOOMR.plugins.RT.setTimer("boomr_lat",BOOMR.t_start-BOOMR.t_lstart)));try{if(window.performance&&window.performance.getEntriesByName){n={"rt.bmr":BOOMR.url};for(i in n)if(n.hasOwnProperty(i)&&n[i]){if(r=window.performance.getEntriesByName(n[i]),!r||0===r.length)continue;r=r[0],o=e(r.startTime,0),a=[o,e(r.responseEnd,o),e(r.responseStart,o),e(r.requestStart,o),e(r.connectEnd,o),e(r.secureConnectionStart,o),e(r.connectStart,o),e(r.domainLookupEnd,o),e(r.domainLookupStart,o),e(r.redirectEnd,o),e(r.redirectStart,o)].join(",").replace(/,+$/,""),BOOMR.addVar(i,a),t.addedVars.push(i)}}}catch(s){BOOMR.addError(s,"rt.getBoomerangTimings")}},checkPreRender:function(){return"prerender"!==BOOMR.visibilityState()?!1:(BOOMR.plugins.RT.startTimer("t_load",this.navigationStart),BOOMR.plugins.RT.endTimer("t_load"),BOOMR.plugins.RT.startTimer("t_prerender",this.navigationStart),BOOMR.plugins.RT.startTimer("t_postrender"),!0)},initFromNavTiming:function(){var t,r,n;this.navigationStart||(r=e.performance||e.msPerformance||e.webkitPerformance||e.mozPerformance,r&&r.navigation&&(this.navigationType=r.navigation.type),r&&r.timing?t=r.timing:e.chrome&&e.chrome.csi&&e.chrome.csi().startE?(t={navigationStart:e.chrome.csi().startE},n="csi"):e.gtbExternal&&e.gtbExternal.startE()&&(t={navigationStart:e.gtbExternal.startE()},n="gtb"),t?(BOOMR.addVar("rt.start",n||"navigation"),this.navigationStart=t.navigationStart||t.fetchStart||void 0,this.responseStart=t.responseStart||void 0,navigator.userAgent.match(/Firefox\/[78]\./)&&(this.navigationStart=t.unloadEventStart||t.fetchStart||void 0)):BOOMR.warn("This browser doesn't support the WebTiming API","rt"))},validateLoadTimestamp:function(t,r,n){if(r&&r.timing&&r.timing.loadEventEnd)return r.timing.loadEventEnd;if(!("xhr"!==n||r&&"spa"===r.initiator))return t;if(BOOMR.loadedLate){if(!e.performance||!e.performance.timing)return BOOMR.t_onload||BOOMR.t_lstart||BOOMR.t_start||t;if(e.performance.timing.loadEventStart&&e.performance.timing.loadEventStart<BOOMR.t_end)return e.performance.timing.loadEventStart}return t},setPageLoadTimers:function(e,r,n){var i;return"xhr"!==e&&(t.initFromCookie(),t.initFromNavTiming(),t.checkPreRender())?!1:("xhr"===e?n&&n.timing&&(i=n.timing.responseStart):t.responseStart?i=t.responseStart:t.timers.hasOwnProperty("t_page")?BOOMR.plugins.RT.endTimer("t_page"):t.t_fb_approx&&(i=t.t_fb_approx),i&&(BOOMR.plugins.RT.endTimer("t_resp",i),t.timers.t_load?BOOMR.plugins.RT.setTimer("t_page",t.timers.t_load.end-i):BOOMR.plugins.RT.setTimer("t_page",r-i)),t.timers.hasOwnProperty("t_postrender")&&(BOOMR.plugins.RT.endTimer("t_postrender"),BOOMR.plugins.RT.endTimer("t_prerender")),!0)},setSupportingTimestamps:function(e){e&&BOOMR.addVar("rt.tstart",e),"number"==typeof t.t_start&&t.t_start!==e&&BOOMR.addVar("rt.cstart",t.t_start),BOOMR.addVar("rt.bstart",BOOMR.t_start),BOOMR.t_lstart&&BOOMR.addVar("rt.blstart",BOOMR.t_lstart),BOOMR.addVar("rt.end",t.timers.t_done.end)},determineTStart:function(e,r){var n;return"xhr"===e?(r&&r.name&&t.timers[r.name]?n=t.timers[r.name].start:r&&r.timing&&r.timing.requestStart&&(n=r.timing.requestStart),"undefined"==typeof n&&r&&"spa"===r.initiator?BOOMR.addVar("rt.start","none"):BOOMR.addVar("rt.start","manual")):t.navigationStart?n=t.navigationStart:t.t_start&&2!==t.navigationType?(n=t.t_start,BOOMR.addVar("rt.start","cookie")):t.cached_t_start?n=t.cached_t_start:(BOOMR.addVar("rt.start","none"),n=void 0),t.cached_t_start=n,n},page_ready:function(){this.onloadfired=!0},check_visibility:function(){"visible"===BOOMR.visibilityState()&&(t.visiblefired=!0),"prerender"===t.visibilityState&&"prerender"!==BOOMR.visibilityState()&&BOOMR.plugins.RT.done(null,"visible"),t.visibilityState=BOOMR.visibilityState()},page_unload:function(e){this.unloadfired||BOOMR.plugins.RT.done(e,"unload"),this.updateCookie({r:r.URL},"beforeunload"===e.type?"ul":"hd"),this.unloadfired=!0},_iterable_click:function(e,r,n,i){var o;if(n){for(;n&&n.nodeName.toUpperCase()!==r;)n=n.parentNode;n&&n.nodeName.toUpperCase()===r&&(o=i(n),this.updateCookie({nu:o},"cl"),BOOMR.addVar("nu",BOOMR.utils.cleanupURL(o)),t.addedVars.push("nu"))}},onclick:function(e){t._iterable_click("Click","A",e,function(e){return e.href})},onsubmit:function(e){t._iterable_click("Submit","FORM",e,function(e){var t=e.getAttribute("action")||r.URL||"";return t.match(/\?/)?t:t+"?"})},domloaded:function(){BOOMR.plugins.RT.endTimer("t_domloaded")},clear:function(){t.addedVars&&t.addedVars.length>0&&(BOOMR.removeVar(t.addedVars),t.addedVars=[])}},BOOMR.plugins.RT={init:function(n){return e!==BOOMR.window&&(e=BOOMR.window),r=e.document,BOOMR.utils.pluginConfig(t,n,"RT",["cookie","cookie_exp","strict_referrer"]),t.r=t.r2=BOOMR.utils.hashQueryString(r.referrer,!0),t.initFromCookie(),t.getBoomerangTimings(),t.initialized?this:(t.complete=!1,t.timers={},BOOMR.subscribe("page_ready",this.done,"load",this),BOOMR.subscribe("xhr_load",this.done,"xhr",this),BOOMR.subscribe("dom_loaded",t.domloaded,null,t),BOOMR.subscribe("before_beacon",this.addTimersToBeacon,"beacon",this),t.initialized=!0,this)},startTimer:function(e,r){return e&&("t_page"===e&&this.endTimer("t_resp",r),t.timers[e]={start:"number"==typeof r?r:BOOMR.now()}),this},endTimer:function(e,r){return e&&(t.timers[e]=t.timers[e]||{},void 0===t.timers[e].end&&(t.timers[e].end="number"==typeof r?r:BOOMR.now())),this},setTimer:function(e,r){return e&&(t.timers[e]={delta:r}),this},addTimersToBeacon:function(e,r){var n,i,o=[];for(n in t.timers)if(t.timers.hasOwnProperty(n)){if(i=t.timers[n],"number"!=typeof i.delta&&("number"!=typeof i.start&&(i.start=t.cached_t_start),i.delta=i.end-i.start),isNaN(i.delta))continue;t.basic_timers.hasOwnProperty(n)?(BOOMR.addVar(n,i.delta),t.addedVars.push(n)):o.push(n+"|"+i.delta)}o.length&&(BOOMR.addVar("t_other",o.join(",")),t.addedVars.push("t_other")),"beacon"===r&&(t.timers={},t.complete=!1)},done:function(e,r){BOOMR.info("RTPlugin_done_#778");try{}catch(n){}var i,o,a=BOOMR.now(),s=!1;return t.complete=!1,o=t.validateLoadTimestamp(a,e,r),"load"!==r&&"visible"!==r&&"xhr"!==r||t.setPageLoadTimers(r,o,e)?(i=t.determineTStart(r,e),this.endTimer("t_done",o),BOOMR.removeVar("t_done","t_page","t_resp","t_postrender","t_prerender","t_load","t_other","r","r2","rt.tstart","rt.cstart","rt.bstart","rt.end","rt.subres","rt.abld","http.errno","http.method","xhr.sync"),BOOMR.addVar("r",BOOMR.utils.cleanupURL(t.r)),t.r2!==t.r&&BOOMR.addVar("r2",BOOMR.utils.cleanupURL(t.r2)),"xhr"===r&&e&&e&&e.data&&(e=e.data),"xhr"===r&&e&&(s=e.subresource,e.url&&(BOOMR.addVar("u",BOOMR.utils.cleanupURL(e.url.replace(/#.*/,""))),t.addedVars.push("u")),e.status&&(e.status<-1||e.status>=400)&&BOOMR.addVar("http.errno",e.status),e.method&&"GET"!==e.method&&BOOMR.addVar("http.method",e.method),e.headers&&BOOMR.addVar("http.hdr",e.headers),e.synchronous&&BOOMR.addVar("xhr.sync",1),e.initiator&&BOOMR.addVar("http.initiator",e.initiator),t.addedVars.push("http.errno","http.method","http.hdr","xhr.sync","http.initiator")),s&&"passive"!==s&&(BOOMR.addVar("rt.subres",1),t.addedVars.push("rt.subres")),t.updateCookie(),"unload"===r&&(BOOMR.addVar("rt.quit",""),t.onloadfired||BOOMR.addVar("rt.abld",""),t.visiblefired||BOOMR.addVar("rt.ntvu","")),t.complete=!0,BOOMR.sendBeacon(),this):this},is_complete:function(){return BOOMR.info("RTPlugin_is_complete_#888"),t.complete},navigationStart:function(){return t.navigationStart||t.initFromNavTiming(),t.navigationStart}})}(window),BOOMR.init({beacon_url:"/rest/beacon",autorun:!1,beacon_switch:"ON",url_pattern:["(.*/login$)","(.*/home$)"],timeout:15e3,blacklist:["v","rt.start","rt.tstart","rt.bstart","rt.end","r","vis.st","vis.lh","r2"],beacon_delay:3e3,sample_ratio:1,RT:{}});
